{
  "anaheim": {
    "address": "FV9aAVcF157mf2mKn9BiU9LDCkxuTwsD9wU6BdcDRv6R",
    "metadata": {
      "name": "anaheim",
      "version": "0.2.0",
      "spec": "0.1.0",
      "description": "Created with Anchor — Anaheim core + Liquidity Mining & Timelock LP for R=3.57/SOL"
    },
    "docs": [
      "─── PROGRAMME PRINCIPAL ────────────────────────────────────────────────────",
      "Ajout: mining SOL -> ajout LP Raydium R=3.57/SOL avec verrouillage >= 3 mois.",
      "Matching 1:1 en valeur de R=3.57 (mint/treasury) + bonus selon plan (3,6,9,12,18,24 mois)."
    ],
    "instructions": [
      { "name": "close", "discriminator": [98,165,201,177,108,65,206,96], "accounts": [
        {"name":"anaheim","writable": true},
        {"name":"payer","writable": true,"signer": true}
      ], "args": [] },

      { "name": "createPost", "discriminator": [123,92,184,29,231,24,15,202], "accounts": [
        {"name": "postAccount","writable": true,"signer": true},
        {"name": "user","writable": true,"signer": true},
        {"name": "systemProgram","address":"11111111111111111111111111111111"}
      ], "args": [{"name":"content","type":"string"}] },

      { "name": "createUser", "discriminator": [108,227,130,130,252,109,75,218], "accounts": [
        {"name":"userAccount","writable": true,"signer": true},
        {"name":"authority","writable": true,"signer": true},
        {"name":"systemProgram","address":"11111111111111111111111111111111"}
      ], "args": [{"name":"username","type":"string"}] },

      { "name": "decrement", "discriminator": [106,227,168,59,248,27,150,101], "accounts": [
        {"name":"anaheim","writable": true}
      ], "args": [] },

      { "name": "increment", "discriminator": [11,18,104,9,104,174,59,33], "accounts": [
        {"name":"anaheim","writable": true}
      ], "args": [] },

      { "name": "initialize", "discriminator": [175,175,109,31,13,152,155,237], "accounts": [
        {"name":"anaheim","writable": true,"signer": true},
        {"name":"payer","writable": true,"signer": true},
        {"name":"systemProgram","address":"11111111111111111111111111111111"}
      ], "args": [] },

      { "name": "set", "discriminator": [198,51,53,241,116,29,126,194], "accounts": [
        {"name":"anaheim","writable": true}
      ], "args": [{"name":"value","type":"u64"}] },

      /* ── NOUVEAU: Configuration du pool et des plans ─────────────────────── */

      {
        "name": "setPoolConfig",
        "discriminator": [41, 5, 210, 134, 7, 91, 22, 199],
        "accounts": [
          { "name": "authority", "signer": true },
          { "name": "poolConfig", "writable": true, "pda": { "seeds": [ { "kind": "const", "value": "pool_config" } ] } },
          { "name": "r357Mint" },
          { "name": "r357Treasury", "writable": true },
          { "name": "pythOrSwitchboardPrice", "optional": true },
          { "name": "raydiumProgram" },
          { "name": "ammId" },
          { "name": "ammAuthority" },
          { "name": "lpMint" },
          { "name": "ammOpenOrders", "optional": true },
          { "name": "ammTargetOrders", "optional": true },
          { "name": "coinVault" },
          { "name": "pcVault" }
        ],
        "args": [
          { "name": "minLockMonths", "type": "u8" },
          { "name": "feeBpsOnEmergencyUnlock", "type": "u16" }
        ]
      },

      {
        "name": "setPlans",
        "discriminator": [77, 152, 9, 200, 31, 90, 244, 11],
        "accounts": [
          { "name": "authority", "signer": true },
          { "name": "poolConfig", "writable": true, "pda": { "seeds": [ { "kind":"const","value":"pool_config"} ] } }
        ],
        "args": [
          {
            "name": "plans",
            "type": {
              "vec": {
                "defined": "LockPlan"
              }
            }
          }
        ]
      },

      /* ── NOUVEAU: Dépôt miné -> ajout LP + lock timé ─────────────────────── */

      {
        "name": "depositMiningAndLock",
        "discriminator": [12, 201, 33, 49, 88, 147, 20, 199],
        "accounts": [
          { "name": "poolConfig", "writable": true, "pda": { "seeds": [ { "kind":"const","value":"pool_config"} ] } },
          { "name": "lockPosition", "writable": true, "pda": { "seeds": [ { "kind":"account","path":"user" }, { "kind":"arg","path":"nonce"} ] } },
          { "name": "user", "signer": true, "writable": true },
          { "name": "userSolSource", "writable": true },
          { "name": "userR357Ata", "writable": true },
          { "name": "r357Mint", "writable": true },
          { "name": "r357Treasury", "writable": true },
          { "name": "lpMint", "writable": true },
          { "name": "userLpAta", "writable": true },
          { "name": "pythOrSwitchboardPrice", "optional": true },
          { "name": "raydiumProgram" },
          { "name": "ammId" },
          { "name": "ammAuthority" },
          { "name": "ammOpenOrders", "optional": true },
          { "name": "ammTargetOrders", "optional": true },
          { "name": "coinVault", "writable": true },
          { "name": "pcVault", "writable": true },
          { "name": "tokenProgram", "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA" },
          { "name": "associatedTokenProgram", "optional": true },
          { "name": "systemProgram", "address": "11111111111111111111111111111111" },
          { "name": "rent", "optional": true }
        ],
        "args": [
          { "name": "planMonths", "type": "u16" },
          { "name": "solAmountLamports", "type": "u64" },
          { "name": "minLpOut", "type": "u64" },
          { "name": "nonce", "type": "u64" }
        ]
      },

      /* ── NOUVEAU: Réclamations & sorties ─────────────────────────────────── */

      {
        "name": "claimAfterMaturity",
        "discriminator": [200, 17, 55, 120, 9, 44, 231, 5],
        "accounts": [
          { "name": "poolConfig", "pda": { "seeds": [ { "kind":"const","value":"pool_config"} ] } },
          { "name": "lockPosition", "writable": true },
          { "name": "user", "signer": true, "writable": true },
          { "name": "userLpAta", "writable": true },
          { "name": "userR357Ata", "writable": true },
          { "name": "r357Mint", "writable": true },
          { "name": "r357Treasury", "writable": true },
          { "name": "tokenProgram", "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA" }
        ],
        "args": []
      },

      {
        "name": "emergencyUnlockWithPenalty",
        "discriminator": [33, 244, 199, 10, 88, 1, 90, 177],
        "accounts": [
          { "name": "poolConfig", "writable": true, "pda": { "seeds": [ { "kind":"const","value":"pool_config"} ] } },
          { "name": "lockPosition", "writable": true },
          { "name": "user", "signer": true, "writable": true },
          { "name": "penaltyCollector", "writable": true },
          { "name": "tokenProgram", "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA" }
        ],
        "args": []
      }
    ],

    "accounts": [
      { "name": "anaheimAccount", "discriminator": [26,253,236,239,22,181,47,158] },
      { "name": "postAccount", "discriminator": [85,236,139,84,240,243,196,23] },
      { "name": "userAccount", "discriminator": [211,33,136,16,186,110,242,127] },

      /* ── NOUVEAU: Comptes pour la tokenomics ─────────────────────────────── */

      {
        "name": "poolConfig",
        "discriminator": [71, 10, 144, 222, 3, 199, 11, 60]
      },
      {
        "name": "lockPosition",
        "discriminator": [129, 44, 5, 210, 7, 201, 88, 2]
      }
    ],

    "errors": [
      { "code": 6000, "name": "alreadyVoted", "msg": "User has already voted." },
      { "code": 6001, "name": "invalidContent", "msg": "Invalid content." },
      { "code": 6002, "name": "contentTooLong", "msg": "Content too long." },
      { "code": 6003, "name": "usernameTooLong", "msg": "Username too long." },
      { "code": 6004, "name": "invalidUsername", "msg": "Invalid username." },
      { "code": 6005, "name": "usernameTooShort", "msg": "Username too short dude!" },
      { "code": 6006, "name": "overflow", "msg": "Overflow occurred." },
      { "code": 6007, "name": "underflow", "msg": "Underflow occurred." },
      { "code": 6008, "name": "usernameExists", "msg": "Username already exists." },
      { "code": 6009, "name": "unauthorized", "msg": "Unauthorized action." },
      { "code": 6010, "name": "invalidAuthority", "msg": "Invalid authority on post." },

      { "code": 6100, "name": "planTooShort", "msg": "Plan en dessous du minimum autorisé." },
      { "code": 6101, "name": "planNotFound", "msg": "Plan introuvable." },
      { "code": 6102, "name": "priceUnavailable", "msg": "Prix non disponible." },
      { "code": 6103, "name": "slippageExceeded", "msg": "Slippage max dépassé." },
      { "code": 6104, "name": "lockNotMatured", "msg": "Période de lock non terminée." }
    ],

    "types": [
      {
        "name": "anaheimAccount",
        "type": {
          "kind": "struct",
          "fields": [
            { "name": "authority", "type": "pubkey" },
            { "name": "count", "type": "u64" },
            { "name": "value", "type": "u8" }
          ]
        }
      },
      {
        "name": "postAccount",
        "type": {
          "kind": "struct",
          "fields": [
            { "name": "content", "type": "string" },
            { "name": "author", "type": "pubkey" },
            { "name": "timestamp", "type": "i64" }
          ]
        }
      },
      {
        "name": "userAccount",
        "docs": [ "─── COMPTES STRUCTURÉS ─────────────────────────────────────────────────────" ],
        "type": {
          "kind": "struct",
          "fields": [
            { "name": "name", "type": "string" },
            { "name": "userAuthority", "type": "pubkey" }
          ]
        }
      },

      /* ── NOUVEAU: types détaillés ────────────────────────────────────────── */

      {
        "name": "LockPlan",
        "type": {
          "kind": "struct",
          "fields": [
            { "name": "months", "type": "u16" },
            { "name": "bonusR357Bps", "type": "u16" }
          ]
        }
      },
      {
        "name": "poolConfig",
        "type": {
          "kind": "struct",
          "fields": [
            { "name": "authority", "type": "pubkey" },
            { "name": "r357Mint", "type": "pubkey" },
            { "name": "r357Treasury", "type": "pubkey" },
            { "name": "pythOrSwitchboardPrice", "type": { "option": "pubkey" } },
            { "name": "raydiumProgram", "type": "pubkey" },
            { "name": "ammId", "type": "pubkey" },
            { "name": "ammAuthority", "type": "pubkey" },
            { "name": "lpMint", "type": "pubkey" },
            { "name": "coinVault"
